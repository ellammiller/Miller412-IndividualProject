;jQuery(document).ready(function(e){function S(o){if(o.keyCode==13){var r=e('.steps ul li').length,t=e('#hooker-steps').steps('getCurrentIndex');if(t===undefined)return!1;if(r==(t+1)){e('a[href="#finish"]').trigger('click')}
else{e('a[href="#next"]').trigger('click')};o.preventDefault();return!1}};var s=bf_getUrlParameter('wizard'),t=bf_getUrlParameter('type'),i=bf_getUrlParameter('template'),T=bf_getUrlParameter('post');if(s==null){return!1};if(s!=null){if(i){load_formbuilder_template(i)};e(document.body).on('change','#public_submit_create_account-0 ',function(){if(e(this).prop('checked')){e('#hooker-steps').steps('insert',6,{title:'Registration',content:p})}
else{e('#hooker-steps').steps('remove',6)}});e('#post, #postbox-container-1, #postbox-container-2, #message, .error').hide();e('#menu-posts-buddyforms a').removeClass('current');e('#menu-posts-buddyforms li').removeClass('current');e('#menu-posts-buddyforms [href*="wizard"]').addClass('current');e('#menu-posts-buddyforms [href*="wizard"]').parent('li').addClass('current');var o=e('#poststuff'),F=o.find('#postbox-container-1'),g=o.find('#postbox-container-2'),k=o.find('#post-body'),d=o.find('#post-body-content'),a=o.find('#submitdiv'),l=a.find('#buddyforms-actions'),u=o.find('#buddyforms_form_shortcodes'),m=o.find('#buddyforms_form_go_pro'),x=o.find('#buddyforms_form_elements'),w=o.find('.buddyforms_template'),E=o.find('#buddyforms_metabox_sidebar'),f=o.find('#notification');f.find('#no-trigger-mailcontainer').hide();f.find('#no-trigger-post-status-mail-container').hide();var h=o.find('#permission'),p=o.find('#registration'),y=o.find('#create-content'),v=o.find('#edit-submissions')};e(document.body).on('click','.bf_wizard_types',function(){r=document.URL;t=e(this).attr('data-type');t=t.split('_')[0];i=e(this).attr('data-template');r=r.replace('wizard=1','wizard=2&type='+t+'&template='+i);window.location=r});if(s==1){C()};if(s==2){z()};if(s=='done'){r=document.URL;r=r.slice(0,r.indexOf('?'));k.prepend('<h1 style="margin: 60px 0; padding: 0px; font-size: 78px; display: block;">High Five!</h1><h2 style="margin: 60px 0; padding: 4px; font-size: 24px; font-weight: normal;">You have created the form '+d.find('#title').val()+'</h2>');d.remove();a.find('#major-publishing-actions').remove();a.find('h2 span').html('View Form and Submissions');var c=m.find('.buddyforms_get_pro'),r=r.split('?'),b=r[0]+'?post='+T+'&action=edit',n=r[0].replace('post.php','edit.php');n=n+'?post_type=buddyforms';l.append('<ul><li><a class="button button-large bf_button_action" href="'+b+'"><span class="dashicons dashicons-edit"></span> Jump in the Form Builder</a></li><li><a class="button button-large bf_button_action" href="'+n+'"><span class="dashicons dashicons-yes"></span> Close the wizard </a></li></ul>');l.append(c);m.remove();u.find('h2 span').html('Embed Your Form via Shortcodes');g.html(u);e('#post').html(o);e('#post, #postbox-container-1, #postbox-container-2').show();if(buddyformsGlobal){e.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_wizard_rewrite_rules'},success:function(e){}})}};function C(){if(buddyformsGlobal){e.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_form_builder_wizard_types'},success:function(o){e('#poststuff #post-body-content').html('<p style="font-size: 21px; margin: 20px 0 30px;">Select the form type to start the Wizard:</p>');e(o).appendTo('#poststuff #post-body-content');e('#poststuff .buddyforms_wizard_types h5:first').hide();e('#post').show()}})}};function z(){e('<input id="bf-form-type-select" name="buddyforms_options[form_type]" type="hidden" value="'+t+'">').appendTo('#poststuff');e('<div id="hooker-steps"> <h3>Name Your Form</h3><section><div id="bf-hooker-name"></div></section></div>').appendTo('#poststuff');if(t=='post'){e('<h3>Post Settings</h3><section><div id="bf-hooker-create-content"></div></section><h3>Submissions</h3><section><div id="bf-hooker-edit-submissions"></div></section>').appendTo('#hooker-steps');e(y).appendTo('#bf-hooker-create-content');e(v).appendTo('#bf-hooker-edit-submissions')};e('<h3>Form Elements</h3><section><div id="bf-hooker-formbuilder"></div></section>').appendTo('#hooker-steps');if(t=='contact'||t=='post'){e('<h3>Mail Notifications</h3><section><div id="bf-hooker-notifications"></div></section>').appendTo('#hooker-steps')};if(t=='registration'){e('<h3>Registration</h3><section><div id="bf-hooker-registration"></div></section>').appendTo('#hooker-steps');e(p).appendTo('#bf-hooker-registration')};if(t=='post'){e('<h3>Permissions</h3><section><div id="bf-hooker-permissions"></div></section>').appendTo('#hooker-steps')};e(d).appendTo('#bf-hooker-name');e(x).appendTo('#bf-hooker-formbuilder');e(f).appendTo('#bf-hooker-notifications');e(h).appendTo('#bf-hooker-permissions');e('#buddyforms_form_elements h2 span').html('Choose a field type and click "Add Field"');e(w).hide();function r(){if(buddyformsGlobal){e.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_form_builder_wizard_elements','type':t},success:function(o){e('#formbuilder-actions-wrap').append(o)}})}};function s(){e(document.body).trigger({type:'buddyform:load_fields'})};r();var o=e('#post').show();o.find('#hooker-steps').steps({headerTag:'h3',bodyTag:'section',transitionEffect:'slideLeft',autoFocus:!0,enableFinishButton:!0,saveState:!0,startIndex:0,onStepChanging:function(o,r,f){if(r==0){var a=e('[name="post_title"]').val(),n=!1;if(a===''){e('[name="post_title"]').removeClass('bf-ok');e('[name="post_title"]').addClass('bf-error');n=!0}
else{e('[name="post_title"]').removeClass('bf-error');e('[name="post_title"]').addClass('bf-ok')};if(n===!0){return!1};return!0};if(r==1){if(t=='post'){var d=e('#form_post_type').val();if(d=='bf_submissions'){e('#form_post_type').addClass('bf-error');return!1}
else{e('#form_post_type').addClass('bf-ok');return!0}}
else{buddyformAutoFillEmptyOrDuplicateSlugs();e('#buddyforms_forms_builder input[required]').each(function(){var t=(e(this).val()!='');if(t){e(this).removeClass('bf-error');var o=e(this).eq(0).attr('name');bfErrors=bfErrors.filter(function(e){return e.field_name!==o})}
else{var o=e(this).eq(0).attr('name');bfErrors.push({isValid:t,element:e(this)[0],type:'accordion',field_name:o});e(this).addClass('bf-error')}});var i=buddyforms_process_errors(bfErrors);return i};e(document.body).trigger({type:'buddyform:load_notifications'});return!0};if(r==2){s();return!0};if(r==3){if(t=='post'){buddyformAutoFillEmptyOrDuplicateSlugs();e('#buddyforms_forms_builder input[required]').each(function(){var t=(e(this).val()!='');if(t){e(this).removeClass('bf-error');var o=e(this).eq(0).attr('name');bfErrors=bfErrors.filter(function(e){return e.field_name!==o})}
else{var o=e(this).eq(0).attr('name');bfErrors.push({isValid:t,element:e(this)[0],type:'accordion',field_name:o});e(this).addClass('bf-error')}});var i=buddyforms_process_errors(bfErrors);return i};return!0};if(r==4){return!0};if(r==5){e('#registration').show();return!0}},onFinishing:function(e,o){return!0},onFinished:function(t,r){var s=e(o).serialize();if(buddyformsGlobal){e.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_form_builder_wizard_save','FormData':s},success:function(o){e('#post').html('<h2 style="margin: 30px 0; padding: 4px;">Well Done! Form Processing.</h2><br><span class="dashicons dashicons-smiley"></span>');window.location=o;return!1}})};return!1}})}});